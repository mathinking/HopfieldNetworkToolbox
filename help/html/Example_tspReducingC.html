
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Improving the convergence of the Hopfield Network applied to the TSP by reducing the parameter C</title><meta name="generator" content="MATLAB 9.2"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2017-04-23"><meta name="DC.source" content="Example_tspReducingC.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Improving the convergence of the Hopfield Network applied to the TSP by reducing the parameter C</h1><!--introduction--><p>In this section, you will be able to see how the convergence of the Hopfield Network is improved when reducing the free parameter C. Note that this had been proved experimentaly but there was no analytical proof until [ref].</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">TSPLIB problem and network parameters</a></li><li><a href="#5">Creating the <tt>HopfieldNetworkTSP</tt> object with value of C 'big'</a></li><li><a href="#7">Training the network</a></li><li><a href="#9">Simulating the network</a></li><li><a href="#10">Visualizing results</a></li><li><a href="#11">Repeating the <tt>tsphopfieldnet</tt> network simulation with a smaller value of C</a></li></ul></div><h2 id="1">TSPLIB problem and network parameters</h2><pre class="codeinput">seed = 10;
rng(seed); <span class="comment">% For reproducibility</span>
</pre><p>TSPLIB Problem:</p><pre class="codeinput">problem = tsplib({<span class="string">'berlin52'</span>});
</pre><p>Number of cities:</p><pre class="codeinput">N = problem.NumberOfCities;
</pre><p>Free parameter C:</p><pre class="codeinput">C = 1e5;
</pre><h2 id="5">Creating the <tt>HopfieldNetworkTSP</tt> object with value of C 'big'</h2><p>Providing problem coordinates cities and distance matrix to the <tt>HopfieldNetworkTSP</tt> network by creating a <tt>HopfieldNetworkTSPOptions</tt> object of options</p><pre class="codeinput">options = tsphopfieldnetOptions(<span class="string">'Coordinates'</span>,problem.Coordinates,<span class="keyword">...</span>
                                <span class="string">'DistanceMatrix'</span>,problem.DistanceMatrix,<span class="keyword">...</span>
                                <span class="string">'DistanceType'</span>,problem.DistanceType);
net1 = tsphopfieldnet(N,C,options);
</pre><p>Data coordinates (cities) can be visualized before training takes place:</p><pre class="codeinput">plot(net1);
</pre><pre class="codeoutput">Warning: Simulation has not taken place yet. Use 'sim(net)' to simulate your
network. 
</pre><img vspace="5" hspace="5" src="Example_tspReducingC_01.png" alt=""> <h2 id="7">Training the network</h2><p>The default training algorithm is <tt>trainty</tt></p><pre class="codeinput">train(net1);
</pre><p>Results of the training phase. Network parameters</p><pre class="codeinput">getTrainParam(net1)
</pre><pre class="codeoutput">
ans = 

  struct with fields:

        A: 1.0000e+05
        B: 100003
        C: 100000
        D: 1
        K: 0
        N: 52
       Np: 52.0000
       dL: 0.0087
       dU: 1
    dUaux: 1716
      rho: 0.0087

</pre><h2 id="9">Simulating the network</h2><p>The default simulation algorithm is <tt>talavan-yanez</tt></p><pre class="codeinput">sim(net1);
</pre><h2 id="10">Visualizing results</h2><pre class="codeinput">getResults(net1)
plot(net1);
</pre><pre class="codeoutput">
ans = 

  struct with fields:

    CheckpointFilename: ''
              CompTime: 0.6721
                Energy: [1&times;836 double]
              ExitFlag: 1
          ItersReached: 836
                  Time: [1&times;836 double]
            TourLength: 29725
             ValidPath: 1
            VisitOrder: [1&times;52 double]

</pre><img vspace="5" hspace="5" src="Example_tspReducingC_02.png" alt=""> <h2 id="11">Repeating the <tt>tsphopfieldnet</tt> network simulation with a smaller value of C</h2><pre class="codeinput">rng(seed); <span class="comment">% For reproducibility</span>
C = 1e-5;

net2 = tsphopfieldnet(N,C,options);
train(net2);
sim(net2);

getResults(net2)

plot(net2);
</pre><pre class="codeoutput">
ans = 

  struct with fields:

    CheckpointFilename: ''
              CompTime: 0.1868
                Energy: [1&times;220 double]
              ExitFlag: 1
          ItersReached: 220
                  Time: [1&times;220 double]
            TourLength: 12889
             ValidPath: 1
            VisitOrder: [1&times;52 double]

</pre><img vspace="5" hspace="5" src="Example_tspReducingC_03.png" alt=""> <p>Note that not only the solution was improved, but the number of iterations and time to convergence was considerably improved.</p><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2017a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Improving the convergence of the Hopfield Network applied to the TSP by reducing the parameter C
% In this section, you will be able to see how the convergence of the
% Hopfield Network is improved when reducing the free parameter C. Note
% that this had been proved experimentaly but there was no analytical proof
% until [ref].

%% TSPLIB problem and network parameters
seed = 10;
rng(seed); % For reproducibility

%%
% TSPLIB Problem:
problem = tsplib({'berlin52'});

%%
% Number of cities:
N = problem.NumberOfCities;

%%
% Free parameter C:
C = 1e5;
 
%% Creating the |HopfieldNetworkTSP| object with value of C 'big'
% Providing problem coordinates cities and distance matrix to the
% |HopfieldNetworkTSP| network by creating a |HopfieldNetworkTSPOptions| 
% object of options
options = tsphopfieldnetOptions('Coordinates',problem.Coordinates,...
                                'DistanceMatrix',problem.DistanceMatrix,...
                                'DistanceType',problem.DistanceType);
net1 = tsphopfieldnet(N,C,options);

%%
% Data coordinates (cities) can be visualized before training takes place:
plot(net1);

%% Training the network
% The default training algorithm is |trainty|
train(net1);
%%
% Results of the training phase. Network parameters
getTrainParam(net1)

%% Simulating the network
% The default simulation algorithm is |talavan-yanez|
sim(net1);

%% Visualizing results
getResults(net1)
plot(net1);

%% Repeating the |tsphopfieldnet| network simulation with a smaller value of C

rng(seed); % For reproducibility
C = 1e-5;

net2 = tsphopfieldnet(N,C,options);
train(net2);
sim(net2);

getResults(net2)

plot(net2);

%%
% Note that not only the solution was improved, but the number of
% iterations and time to convergence was considerably improved.

##### SOURCE END #####
--></body></html>